//1.获取数据
//2.初始化数据
//3.联动选择
//3-1.选择其中一行，清空后面所有数据
//3-2.判断是否为最后一行，是：获取选中的数据，根据数据查询子数据，并添加到下一行

//1.获取数据
var carJson={"parKey":["奥迪","法拉利"],"奥迪":{"parKey":["A4","A6","A8","S4","S6","S8","TT","Q7"],"A4":{"parKey":["2.0TFSI","3.0TDI","3.2FSI"],"2.0TFSI":["2010","2011","2012","2013","2014"],"3.0TDI":["2010","2011","2012","2013","2014"],"3.2FSI":["2010","2011","2012","2013","2014"]},"A6":{"parKey":["3.0TDI","3.2FSI","4.2FSI","其他"],"3.0TDI":["2010","2011","2012","2013","2014"],"3.2FSI":["2010","2011","2012","2013","2014"],"4.2FSI":["2010","2011","2012","2013","2014"],"其他":["2010","2011","2012","2013","2014"]},"A8":{"parKey":["3.0FSI","3.2FSI","4.2TDI","6.0"],"3.0FSI":["2010","2011","2012","2013","2014"],"3.2FSI":["2010","2011","2012","2013","2014"],"4.2TDI":["2010","2011","2012","2013","2014"],"6.0":["2010","2011","2012","2013","2014"]},"S4":{"parKey":["4.2FSI","其他"],"4.2FSI":["2010","2011","2012","2013","2014"],"其他":["2010","2011","2012","2013","2014"]},"S6":{"parKey":["5.2FSI","其他"],"5.2FSI":["2010","2011","2012","2013","2014"],"其他":["2010","2011","2012","2013","2014"]},"S8":{"parKey":["5.2FSI","其他"],"5.2FSI":["2010","2011","2012","2013","2014"],"其他":["2010","2011","2012","2013","2014"]},"TT":{"parKey":["3.2FSI","其他"],"3.2FSI":["2010","2011","2012","2013","2014"],"其他":["2010","2011","2012","2013","2014"]},"Q7":{"parKey":["3.0TDI","4.2FSI"],"3.0TDI":["2010","2011","2012","2013","2014"],"4.2FSI":["2010","2011","2012","2013","2014"]}},"法拉利":{"parKey":["3系","5系","7系","X3","X5","Z4","M"],"3系":{"parKey":["318i","320i","330i"],"318i":["2010","2011","2012","2013","2014"],"320i":["2010","2011","2012","2013","2014"],"330i":["2010","2011","2012","2013","2014"]},"5系":{"parKey":["523Li","525Li","5330Li","550i"],"523Li":["2010","2011","2012","2013","2014"],"525Li":["2010","2011","2012","2013","2014"],"5330Li":["2010","2011","2012","2013","2014"],"550i":["2010","2011","2012","2013","2014"]},"7系":{"parKey":["630i","650i"],"630i":["2010","2011","2012","2013","2014"],"650i":["2010","2011","2012","2013","2014"]},"X3":{"parKey":["730Li","740Li","760Li"],"730Li":["2010","2011","2012","2013","2014"],"740Li":["2010","2011","2012","2013","2014"],"760Li":["2010","2011","2012","2013","2014"]},"X5":{"parKey":["X3","X5"],"X3":["2010","2011","2012","2013","2014"],"X5":["2010","2011","2012","2013","2014"]},"Z4":{"parKey":["Z3","Z4","Z6","Z8"],"Z3":["2010","2011","2012","2013","2014"],"Z4":["2010","2011","2012","2013","2014"],"Z6":["2010","2011","2012","2013","2014"],"Z8":["2010","2011","2012","2013","2014"]},"M":{"parKey":["M1","M2","M3","M5","M6","M7","M24","M"],"M1":["2010","2011","2012","2013","2014"],"M2":["2010","2011","2012","2013","2014"],"M3":["2010","2011","2012","2013","2014"],"M5":["2010","2011","2012","2013","2014"],"M6":["2010","2011","2012","2013","2014"],"M7":["2010","2011","2012","2013","2014"],"M24":["2010","2011","2012","2013","2014"],"M":["2010","2011","2012","2013","2014"]}}};

//2.初始化数据
for(var k in carJson.parKey){
	$('#carChoose select').eq(0).append($('<option>' + carJson.parKey[k]+ '</option>'));
}

//3.联动选择
//3-1.选择其中一行，清空后面所有数据
//3-2.判断是否为最后一行，是：获取选中的数据，根据数据查询子数据，并添加到下一行

var selBrand = [];
var selAudi = [];
$(document).on('change','#carBrand',function(){
	$('#carModels option+option').remove();
	$('#carAttr option+option').remove();
	selBrand = [];
	var carSer = [];
	var carModels = [];
	var brand = $(this).val();
	carSer = carJson[brand].parKey;
	selBrand = carJson[brand];
	$('#carAudi').html($('<option disabled selected>').text('请选择车辆车系'));
	for(var k in carSer){
		$('#carAudi').append($('<option>').text(carSer[k]));
	}
});

$(document).on('change','#carAudi',function(){
	$('#carAttr option+option').remove();
	selAudi = [];
	var model = $(this).val();
	var carModels = selBrand[model].parKey;
	selAudi = selBrand[model];
	$('#carModels').html($('<option disabled selected>').text('请选择车辆车型'));
	for(var j in carModels){
		$('#carModels').append($('<option>').text(carModels[j]));
	}
});

$(document).on('change','#carModels',function(){
	var attr = $(this).val();
	carAttr = selAudi[attr];
	$('#carAttr').html($('<option disabled selected>').text('请选择车辆车款'));
	for(var k in carAttr){
		$('#carAttr').append($('<option>').text(carAttr[k]));
	}
});